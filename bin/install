#!/bin/bash

declare file=~/.bashrc
declare regex="alias oasys="
declare file_content=$( cat "${file}" )

if [[ " $file_content " =~ $regex ]] # please note the space before and after the file content
  then
    printf '\n%s\n' 'OASYS is already installed on your system.'
  else
    printf '%s' 'Installing OASYS on your system...'
    OASYS_REL_PATH="`dirname \"$0\"`"              # relative
    OASYS_ABS_PATH="`( cd \"$OASYS_REL_PATH\" && pwd )`"  # absolutized and normalized
    if [ -z "$OASYS_ABS_PATH" ] ; then
      # error; for some reason, the path is not accessible
      # to the script (e.g. permissions re-evaled after suid)
      exit 1  # fail
    fi
    OASYS_DIR=${OASYS_ABS_PATH}
    printf '\nalias oasys="%s"\nOASYS_SRC=%s\nOASYS_ROOT=%s' ${OASYS_DIR}/oasys ${OASYS_DIR}/../src ${OASYS_DIR}/../ >> ~/.bashrc
    printf '\nInstallation Successful.\nPlease restart terminal for changes to be registered.\n\n'
fi

exit