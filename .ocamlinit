#require "pa_ounit";;
#require "async";;
#require "str";;
#require "yojson";;
#require "fileutils";;

#directory "_build";;

#load "coconuts.d.cmo";;

#load "palmtreeupdater.d.cmo";;
#use "palmtreeupdater.ml";;

let tree = PalmTree.empty;;
let tree = PalmTree.add "master" [] tree;;
let config = {repo_dir= "./test_proj/"; current_branch="master"}

let cmd = (LOCAL,INIT,[],[]);;
let (tree,config,feedback) = update_tree cmd tree config;;

let cmd = (LOCAL,ADD,[],["wuggle.txt"]);;
let (tree,config,feedback) = update_tree cmd tree config;;

let cmd = (LOCAL,COMMIT,[],["added wuggle.txt"]);;
let (tree,config,feedback) = update_tree cmd tree config;;

let cmd = (LOCAL,RM,[],["wuggle.txt"]);;
let (tree,config,feedback) = update_tree cmd tree config;;

let cmd = (LOCAL,COMMIT,[],["removed wuggle.txt"]);;
let (tree,config,feedback) = update_tree cmd tree config;;